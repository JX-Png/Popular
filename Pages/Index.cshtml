@page
@model PopularBookstore.Pages.IndexModel
@using System
@{
    ViewData["Title"] = "Homepage";
}

<style>
    .book-gallery {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); /* Responsive grid */
        gap: 25px;
        padding: 25px;
        background-color: #fff;
    }

    .book-card {
        border: 2px solid #ffe0e0;
        border-radius: 8px;
        padding: 15px;
        text-align: center;
        background-color: #fff9f9;
        box-shadow: 0 2px 5px rgba(0,0,0,0.1);
    }

        .book-card h4 {
            font-size: 1.1em;
            margin-bottom: 5px;
            min-height: 40px;
        }

        .book-card .author {
            font-size: 0.9em;
            color: #555;
            margin-bottom: 8px;
        }

        .book-card .price {
            font-size: 1em;
            font-weight: bold;
            color: #28a745;
            margin-bottom: 10px;
        }

    .book-image-placeholder {
        width: 100%;
        height: 200px;
        background-color: #e9ecef;
        border: 1px solid #ced4da;
        display: flex;
        align-items: center;
        justify-content: center;
        margin-bottom: 15px;
        overflow: hidden;
    }

        .book-image-placeholder img {
            max-width: 100%;
            max-height: 100%;
            object-fit: contain;
        }

    .book-actions {
        display: flex;
        justify-content: center;
        gap: 5px;
        margin-top: 10px;
    }

        .book-actions .btn {
            background-color: #f0f0f0;
            border: 1px solid #ccc;
            padding: 8px 15px;
            margin: 0;
            border-radius: 4px;
            text-decoration: none;
            color: #333;
            cursor: pointer;
            font-size: 0.9em;
            flex: 1;
            text-align: center;
        }

            .book-actions .btn:hover {
                background-color: #e0e0e0;
            }

</style>

<partial name="_Header" />

<div class="book-gallery">
    @foreach (var book in Model.Books)
    {
        <div class="book-card">
            <div class="book-image-placeholder">
                @if (book.ImageData != null && book.ImageMimeType != null)
                {
                    <img src="data:@book.ImageMimeType;base64,@Convert.ToBase64String(book.ImageData)" alt="@book.Title" />
                }
                else if (!string.IsNullOrEmpty(book.ImageUrl))
                {
                    <img src="@book.ImageUrl" alt="@book.Title" />
                }
            </div>
            <h4>@book.Title</h4>
            <div class="book-author">
                By @book.Author
            </div>
            <div class="book-price">
                Price: @book.Price.ToString("C")
            </div>
            <div class="book-actions">
                <a asp-page="/ViewInfo" asp-route-id="@book.Id" class="btn">View Info</a>
                <a asp-page="/AddToCart" asp-route-id="@book.Id" class="btn">Add to cart</a>
            </div>
        </div>
    }
</div>